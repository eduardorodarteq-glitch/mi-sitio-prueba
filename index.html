<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>AI Code Sentinel — Prompt Factory</title>
  <meta name="description" content="Micro-app interna: brief con opciones → prompt maestro automático." />

  <style>
    :root{
      --bg:#070816;
      --panel:rgba(255,255,255,.06);
      --panel2:rgba(255,255,255,.10);
      --line:rgba(255,255,255,.14);
      --text:rgba(255,255,255,.90);
      --muted:rgba(255,255,255,.62);
      --a:#7cf7ff;
      --b:#b37cff;
      --ok:#2bff88;
      --bad:#ff4d6d;
      --shadow: 0 18px 70px rgba(0,0,0,.45);
      --r:18px;
    }
    *{box-sizing:border-box}
    body{
      margin:0;
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Arial;
      color:var(--text);
      background:
        radial-gradient(1200px 700px at 15% 12%, rgba(124,247,255,.18), transparent 60%),
        radial-gradient(900px 650px at 85% 20%, rgba(179,124,255,.18), transparent 55%),
        linear-gradient(180deg, #050611, var(--bg) 40%, #050611);
      overflow-x:hidden;
    }
    .container{max-width:1100px; margin:0 auto; padding:16px;}
    .top{
      position:sticky; top:0; z-index:10;
      background: rgba(5,6,17,.55);
      backdrop-filter: blur(12px);
      border-bottom:1px solid rgba(255,255,255,.08);
    }
    .topbar{display:flex; justify-content:space-between; align-items:center; gap:12px; padding:12px 0;}
    .brand{display:flex; align-items:center; gap:10px; min-width:0;}
    .logo{
      width:38px; height:38px; border-radius:12px;
      background: radial-gradient(circle at 30% 30%, rgba(124,247,255,.9), rgba(179,124,255,.8));
      box-shadow: 0 0 0 1px rgba(255,255,255,.18), 0 18px 45px rgba(124,247,255,.12);
      position:relative; overflow:hidden;
    }
    .logo:before{
      content:""; position:absolute; inset:-50%;
      background: conic-gradient(from 180deg, rgba(255,255,255,0), rgba(255,255,255,.30), rgba(255,255,255,0));
      animation: spin 6s linear infinite;
      opacity:.8;
    }
    @keyframes spin{to{transform:rotate(360deg)}}
    h1{margin:0; font-size:14px; letter-spacing:.14em; text-transform:uppercase; white-space:nowrap; overflow:hidden; text-overflow:ellipsis;}
    .sub{margin:4px 0 0; color:var(--muted); font-size:12px; line-height:1.35; max-width:70ch;}
    .pill{
      border:1px solid rgba(255,255,255,.16);
      background: rgba(0,0,0,.25);
      padding:8px 10px;
      border-radius:999px;
      font-size:12px;
      color:var(--muted);
    }

    .grid{display:grid; grid-template-columns: 1fr 1fr; gap:12px; align-items:start;}
    @media (max-width: 980px){ .grid{grid-template-columns:1fr;} }

    .card{
      background: linear-gradient(180deg, var(--panel), rgba(255,255,255,.04));
      border:1px solid var(--line);
      border-radius:var(--r);
      box-shadow: var(--shadow);
      backdrop-filter: blur(10px);
      overflow:hidden;
    }
    .head{
      padding:14px;
      border-bottom:1px solid rgba(255,255,255,.08);
      display:flex; justify-content:space-between; align-items:flex-start; gap:10px;
    }
    .head b{letter-spacing:.02em;}
    .head small{display:block; margin-top:4px; color:var(--muted); font-size:12px; line-height:1.35;}
    .body{padding:14px;}
    label{display:block; font-size:12px; color:var(--muted); margin:0 0 6px;}
    input, select, textarea{
      width:100%;
      border:1px solid rgba(255,255,255,.14);
      background: rgba(0,0,0,.22);
      color:var(--text);
      border-radius:14px;
      padding:10px 12px;
      outline:none;
      font-size:13px;
    }
    textarea{min-height:80px; resize:vertical;}
    input:focus, select:focus, textarea:focus{
      border-color: rgba(124,247,255,.55);
      box-shadow: 0 0 0 3px rgba(124,247,255,.12);
    }
    .row{display:grid; grid-template-columns: 1fr 1fr; gap:10px;}
    @media (max-width: 980px){ .row{grid-template-columns:1fr;} }

    .checks{display:grid; grid-template-columns: 1fr 1fr; gap:8px;}
    @media (max-width: 980px){ .checks{grid-template-columns:1fr;} }
    .ck{
      display:flex; gap:10px; align-items:flex-start;
      border:1px solid rgba(255,255,255,.12);
      background: rgba(0,0,0,.18);
      border-radius:14px;
      padding:10px;
    }
    .ck input{width:auto; margin-top:2px;}
    .ck b{display:block; font-size:12px;}
    .ck small{display:block; color:var(--muted); font-size:11px; margin-top:3px; line-height:1.35;}

    .actions{display:flex; gap:10px; flex-wrap:wrap; align-items:center;}
    .btn{
      appearance:none;
      border:1px solid rgba(255,255,255,.16);
      background: rgba(255,255,255,.08);
      color:var(--text);
      border-radius:14px;
      padding:10px 12px;
      font-weight:900;
      font-size:12px;
      cursor:pointer;
      transition: transform .12s ease, background .2s ease, border .2s ease;
    }
    .btn:hover{transform: translateY(-1px); background: rgba(255,255,255,.12); border-color: rgba(255,255,255,.26);}
    .btn.primary{
      border-color: rgba(124,247,255,.45);
      background: linear-gradient(180deg, rgba(124,247,255,.22), rgba(179,124,255,.18));
    }
    .btn.danger{border-color: rgba(255,77,109,.30);}
    .btn.danger:hover{background: rgba(255,77,109,.10);}

    .out{
      width:100%;
      border:1px solid rgba(255,255,255,.14);
      background: rgba(0,0,0,.22);
      color: rgba(255,255,255,.86);
      border-radius:14px;
      padding:12px;
      font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono";
      font-size:12px;
      line-height:1.5;
      min-height: 180px;
      white-space:pre-wrap;
      word-break:break-word;
    }
    .hint{color:var(--muted); font-size:12px; line-height:1.45;}
    .tag{display:inline-flex; gap:8px; align-items:center; border:1px solid rgba(255,255,255,.16); background: rgba(0,0,0,.22); padding:6px 10px; border-radius:999px; font-size:12px; color:var(--muted);}
    .dot{width:10px; height:10px; border-radius:50%; background: var(--ok); box-shadow:0 0 18px rgba(43,255,136,.25);}
    .toast{
      position:fixed; left:50%; bottom:18px; transform:translateX(-50%);
      z-index:99; opacity:0; transition: opacity .2s ease, transform .2s ease;
      background: rgba(0,0,0,.55);
      border:1px solid rgba(255,255,255,.16);
      border-radius:999px;
      padding:10px 14px;
      color: rgba(255,255,255,.9);
      backdrop-filter: blur(10px);
      box-shadow: var(--shadow);
      font-size:12px;
      pointer-events:none;
    }
    .toast.on{opacity:1; transform:translateX(-50%) translateY(-6px);}
    footer{padding:18px 0 28px; color:var(--muted); font-size:12px;}
  </style>
</head>

<body>
  <div class="top">
    <div class="container topbar">
      <div class="brand">
        <div class="logo" aria-hidden="true"></div>
        <div style="min-width:0">
          <h1>AI Code Sentinel — Prompt Factory</h1>
          <p class="sub">Elige opciones → genera BRIEF + PROMPT MAESTRO listo para pegar en cualquier IA.</p>
        </div>
      </div>
      <div class="pill">v1.0 · interno</div>
    </div>
  </div>

  <div class="container">
    <div class="grid">
      <!-- LEFT: FORM -->
      <div class="card">
        <div class="head">
          <div>
            <b>Brief con opciones</b>
            <small>Llena lo mínimo. Si no sabes algo, deja “Elige tú”.</small>
          </div>
          <span class="tag"><span class="dot"></span>Sin backend · Gratis</span>
        </div>
        <div class="body">
          <div class="row">
            <div>
              <label>Tipo de proyecto</label>
              <select id="projectType">
                <option value="Landing page">A) Landing page (1 página, conversión)</option>
                <option value="Sitio web">B) Sitio web (3–8 páginas)</option>
                <option value="E-commerce">C) E-commerce (tienda)</option>
                <option value="Web app">D) Web app (panel/sistema)</option>
                <option value="SaaS">E) SaaS (suscripción)</option>
                <option value="Funnel">F) Funnel / página de ventas</option>
              </select>
            </div>
            <div>
              <label>Nicho / negocio</label>
              <select id="niche">
                <option value="Bufete de abogados">A) Abogados / legal</option>
                <option value="Restaurante">B) Restaurante</option>
                <option value="Agencia">C) Agencia</option>
                <option value="Salud">D) Salud</option>
                <option value="Educación">E) Educación</option>
                <option value="Tienda de productos">F) Tienda</option>
                <option value="Tecnología / IA">G) Tecnología / IA</option>
              </select>
            </div>
          </div>

          <div class="row">
            <div>
              <label>Objetivo principal</label>
              <select id="goal">
                <option value="Captar leads">A) Captar leads</option>
                <option value="WhatsApp como canal principal">B) WhatsApp como canal principal</option>
                <option value="Agendar citas">C) Agendar citas</option>
                <option value="Vender">D) Vender</option>
                <option value="Branding / confianza">E) Branding / confianza</option>
                <option value="Soporte">F) Soporte</option>
              </select>
            </div>
            <div>
              <label>Nivel</label>
              <select id="level">
                <option value="Demo">A) Demo (mostrar rápido)</option>
                <option value="MVP">B) MVP (funcional)</option>
                <option value="Producción">C) Producción (cliente real)</option>
                <option value="Portafolio">D) Portafolio (caso de estudio)</option>
              </select>
            </div>
          </div>

          <div class="row">
            <div>
              <label>Estilo visual</label>
              <select id="style">
                <option value="Corporate premium">A) Corporate premium</option>
                <option value="Tech futurista">B) Tech futurista</option>
                <option value="Minimalista limpio">C) Minimalista</option>
                <option value="Dark moderno">D) Dark moderno</option>
                <option value="Creativo atrevido">E) Creativo atrevido</option>
              </select>
            </div>
            <div>
              <label>Colores</label>
              <select id="colors">
                <option value="Elige tú según el estilo">A) Elige tú</option>
                <option value="Negro + blanco + dorado">B) Negro + blanco + dorado</option>
                <option value="Azul marino + blanco + dorado">C) Azul marino + blanco + dorado</option>
                <option value="Negro + neón (cian/morado)">D) Negro + neón (cian/morado)</option>
                <option value="Paleta exacta (yo la pondré)">E) Paleta exacta (yo la pondré)</option>
              </select>
            </div>
          </div>

          <div class="row">
            <div>
              <label>Nombre de marca</label>
              <input id="brandName" placeholder="Ej: García y Asociados" />
            </div>
            <div>
              <label>Ciudad (opcional)</label>
              <input id="city" placeholder="Ej: Ciudad Juárez" />
            </div>
          </div>

          <div class="row">
            <div>
              <label>WhatsApp (formato internacional)</label>
              <input id="whatsapp" placeholder="Ej: 5216561234567" />
            </div>
            <div>
              <label>Tono del contenido</label>
              <select id="tone">
                <option value="Profesional y directo">A) Profesional y directo</option>
                <option value="Persuasivo vendedor">B) Persuasivo vendedor</option>
                <option value="Cercano humano">C) Cercano humano</option>
                <option value="Minimal y elegante">D) Minimal y elegante</option>
                <option value="Técnico experto">E) Técnico experto</option>
              </select>
            </div>
          </div>

          <div>
            <label>Servicios principales (separados por coma)</label>
            <input id="services" placeholder="Ej: Civil, Mercantil, Laboral" />
          </div>

          <div style="height:12px"></div>

          <label>Módulos (para el código)</label>
          <div class="checks">
            <label class="ck"><input type="checkbox" id="m_whatsapp" checked />
              <div><b>WhatsApp flotante</b><small>Solo cambias el teléfono.</small></div>
            </label>
            <label class="ck"><input type="checkbox" id="m_form" checked />
              <div><b>Formulario validado</b><small>Sin backend; listo para EmailJS después.</small></div>
            </label>
            <label class="ck"><input type="checkbox" id="m_booking" />
              <div><b>Agenda (demo local)</b><small>Guarda citas en el navegador.</small></div>
            </label>
            <label class="ck"><input type="checkbox" id="m_anim" checked />
              <div><b>Animaciones</b><small>Scroll reveal (ligero, pro).</small></div>
            </label>
            <label class="ck"><input type="checkbox" id="m_music" />
              <div><b>Música ambiental</b><small>Web Audio (sin archivos).</small></div>
            </label>
            <label class="ck"><input type="checkbox" id="m_legal" checked />
              <div><b>Legal básico</b><small>Aviso privacidad + términos (demo).</small></div>
            </label>
          </div>

          <div style="height:12px"></div>

          <label>Integraciones (lista para “activar”)</label>
          <div class="checks">
            <label class="ck"><input type="checkbox" id="i_emailjs" />
              <div><b>Email (EmailJS)</b><small>Envío de formulario sin backend.</small></div>
            </label>
            <label class="ck"><input type="checkbox" id="i_stripe" />
              <div><b>Pagos (Stripe)</b><small>Checkout/anticipo (requiere cuenta).</small></div>
            </label>
            <label class="ck"><input type="checkbox" id="i_paypal" />
              <div><b>Pagos (PayPal)</b><small>Botón/checkout (requiere cuenta).</small></div>
            </label>
            <label class="ck"><input type="checkbox" id="i_gcal" />
              <div><b>Google Calendar</b><small>Enlace prellenado / API después.</small></div>
            </label>
            <label class="ck"><input type="checkbox" id="i_supabase" />
              <div><b>BD (Supabase)</b><small>Usuarios, datos, escalable.</small></div>
            </label>
            <label class="ck"><input type="checkbox" id="i_ga4" />
              <div><b>Analytics (GA4)</b><small>Medición, eventos, conversiones.</small></div>
            </label>
          </div>

          <div style="height:14px"></div>

          <div class="actions">
            <button class="btn primary" id="btnGenerate">Generar Prompt</button>
            <button class="btn" id="btnCopyPrompt">Copiar PROMPT</button>
            <button class="btn" id="btnCopyBrief">Copiar BRIEF</button>
            <button class="btn danger" id="btnReset">Reset</button>
          </div>

          <div style="height:10px"></div>
          <div class="hint">
            Tip: si no pones WhatsApp, el prompt pedirá dejarlo como <b>521XXXXXXXXXX</b> para que lo cambies luego.
          </div>
        </div>
      </div>

      <!-- RIGHT: OUTPUT -->
      <div class="card">
        <div class="head">
          <div>
            <b>Salida</b>
            <small>Arriba: BRIEF. Abajo: PROMPT MAESTRO (pegable en cualquier IA).</small>
          </div>
        </div>
        <div class="body">
          <label>BRIEF estructurado</label>
          <div class="out" id="outBrief">(Genera para ver contenido…)</div>

          <div style="height:12px"></div>

          <label>PROMPT MAESTRO listo</label>
          <div class="out" id="outPrompt">(Genera para ver contenido…)</div>

          <div style="height:12px"></div>

          <div class="hint">
            Uso recomendado: Copias el PROMPT → lo pegas en 2 o 3 IAs → comparas → eliges el mejor output.
          </div>
        </div>
      </div>
    </div>

    <footer class="container">
      <div class="hint">
        AI Code Sentinel · Micro-app interna v1.0 · Próximo upgrade: guardar presets por cliente y exportar JSON.
      </div>
    </footer>
  </div>

  <div class="toast" id="toast"></div>

  <script>
    // === NO TOCAR (helpers) ===
    const $ = (id)=>document.getElementById(id);
    function toast(msg){
      const el = $("toast");
      el.textContent = msg;
      el.classList.add("on");
      clearTimeout(el._t);
      el._t = setTimeout(()=> el.classList.remove("on"), 1600);
    }
    function readChecks(ids){
      const obj = {};
      ids.forEach(id => obj[id] = !!$(id).checked);
      return obj;
    }
    async function copyText(text){
      try{
        await navigator.clipboard.writeText(text);
        toast("Copiado ✅");
      }catch(e){
        toast("No se pudo copiar (copia manual)");
      }
    }

    // === PROMPT MAESTRO (motor fijo) ===
    function buildMasterPrompt(briefText){
      return `Actúa como arquitecto senior de productos digitales y desarrollador full-stack.

Debes generar proyectos reales de agencia, no ejemplos.
Todo lo que entregues debe cumplir estas reglas:

REGLAS OBLIGATORIAS:
1. Código funcional en su versión base (sin backend).
2. Código comentado y estructurado.
3. Marcar SIEMPRE con comentarios:
   // EDITAR AQUÍ
   // MÓDULO OPCIONAL
   // ACTIVAR INTEGRACIÓN
   // NO TOCAR
4. Incluir un "SWITCHBOARD" de módulos activables al inicio del código.
5. Explicar herramientas y pasos para activar integraciones.
6. Pensar el proyecto como escalable y vendible.

INPUT DEL PROYECTO (BRIEF):
${briefText}

OUTPUT OBLIGATORIO:
1) Arquitectura del proyecto (mapa de secciones/páginas)
2) Stack recomendado (herramientas) y por qué
3) Wireflow (cómo navega el usuario)
4) Código completo funcional (ideal en un solo index.html si es demo)
5) Switchboard de módulos (ON/OFF)
6) Lista exacta de lugares donde puedo editar:
   – textos, imágenes, colores, teléfonos, links, integraciones
7) Guía de activación de integraciones (paso a paso)
8) Checklist de calidad (SEO básico, performance, accesibilidad)
9) Sugerencias para vender este proyecto como agencia

No simplifiques.
No me des teoría.
Quiero ejecución clara, ordenada y profesional.`;
    }

    // === Genera BRIEF estructurado (para pegar dentro del prompt) ===
    function buildBrief(){
      const projectType = $("projectType").value;
      const niche = $("niche").value;
      const goal = $("goal").value;
      const level = $("level").value;
      const style = $("style").value;
      const colors = $("colors").value;

      const brandName = $("brandName").value.trim() || "(Sin nombre — definir)";
      const city = $("city").value.trim() || "(No especificado)";
      const whatsapp = $("whatsapp").value.trim() || "521XXXXXXXXXX";
      const tone = $("tone").value;

      const services = $("services").value.trim() || "(No especificados)";

      const modules = readChecks(["m_whatsapp","m_form","m_booking","m_anim","m_music","m_legal"]);
      const integrations = readChecks(["i_emailjs","i_stripe","i_paypal","i_gcal","i_supabase","i_ga4"]);

      const moduleList = [
        modules.m_whatsapp ? "WhatsApp flotante" : null,
        modules.m_form ? "Formulario validado" : null,
        modules.m_booking ? "Agenda demo (localStorage)" : null,
        modules.m_anim ? "Animaciones (scroll reveal)" : null,
        modules.m_music ? "Música ambiental (Web Audio)" : null,
        modules.m_legal ? "Legal básico (privacidad/términos)" : null,
      ].filter(Boolean).join(", ") || "(ninguno)";

      const integList = [
        integrations.i_emailjs ? "EmailJS (form->email sin backend)" : null,
        integrations.i_stripe ? "Stripe (pagos/checkout)" : null,
        integrations.i_paypal ? "PayPal (pagos)" : null,
        integrations.i_gcal ? "Google Calendar (citas)" : null,
        integrations.i_supabase ? "Supabase (BD/usuarios)" : null,
        integrations.i_ga4 ? "GA4 Analytics (métricas)" : null,
      ].filter(Boolean).join(", ") || "(ninguna)";

      // Brief en formato claro y pegable
      return `=== CONTEXTO DEL PROYECTO ===
Marca: ${brandName}
Ciudad: ${city}
Tipo de proyecto: ${projectType}
Nicho: ${niche}
Objetivo principal: ${goal}
Nivel: ${level}

=== IDENTIDAD VISUAL ===
Estilo visual: ${style}
Colores: ${colors}
Tono del contenido: ${tone}

=== CONTENIDO ===
Servicios principales: ${services}
Texto: (Genera copy listo en español, profesional, con enfoque en conversión y confianza)

=== FUNCIONALIDADES (MÓDULOS) ===
Incluir: ${moduleList}

=== INTEGRACIONES (LISTAS PARA ACTIVAR) ===
Incluir: ${integList}

=== DATOS EDITABLES (OBLIGATORIO MARCAR EN CÓDIGO) ===
WhatsApp: ${whatsapp}

=== REQUISITOS DE ENTREGA DEL CÓDIGO ===
- Debe incluir "SWITCHBOARD" al inicio para activar/desactivar módulos e integraciones.
- Debe marcar con comentarios:
  // EDITAR AQUÍ (teléfono, textos, colores, imágenes, links)
  // MÓDULO OPCIONAL (bloques)
  // ACTIVAR INTEGRACIÓN (dónde pegar API KEY / IDs)
  // NO TOCAR (lógica)
- Debe explicar herramientas y pasos concretos para activar cada integración seleccionada.
- Debe ser rápido, limpio, responsive, y listo para publicar en GitHub Pages o Netlify.`;
    }

    function generate(){
      const brief = buildBrief();
      const prompt = buildMasterPrompt(brief);
      $("outBrief").textContent = brief;
      $("outPrompt").textContent = prompt;
      toast("Generado ✅");
    }

    // === eventos ===
    $("btnGenerate").addEventListener("click", generate);

    $("btnCopyPrompt").addEventListener("click", ()=>{
      const t = $("outPrompt").textContent;
      if(!t || t.includes("(Genera")){ toast("Primero genera"); return; }
      copyText(t);
    });

    $("btnCopyBrief").addEventListener("click", ()=>{
      const t = $("outBrief").textContent;
      if(!t || t.includes("(Genera")){ toast("Primero genera"); return; }
      copyText(t);
    });

    $("btnReset").addEventListener("click", ()=>{
      // valores default
      $("projectType").selectedIndex = 0;
      $("niche").selectedIndex = 0;
      $("goal").selectedIndex = 0;
      $("level").selectedIndex = 0;
      $("style").selectedIndex = 0;
      $("colors").selectedIndex = 0;
      $("tone").selectedIndex = 0;

      $("brandName").value = "";
      $("city").value = "";
      $("whatsapp").value = "";
      $("services").value = "";

      // checks default
      $("m_whatsapp").checked = true;
      $("m_form").checked = true;
      $("m_booking").checked = false;
      $("m_anim").checked = true;
      $("m_music").checked = false;
      $("m_legal").checked = true;

      $("i_emailjs").checked = false;
      $("i_stripe").checked = false;
      $("i_paypal").checked = false;
      $("i_gcal").checked = false;
      $("i_supabase").checked = false;
      $("i_ga4").checked = false;

      $("outBrief").textContent = "(Genera para ver contenido…)";
      $("outPrompt").textContent = "(Genera para ver contenido…)";
      toast("Reset ✅");
    });

    // auto-fill ejemplo para que no estés en blanco
    window.addEventListener("load", ()=>{
      $("brandName").value = "García y Asociados";
      $("city").value = "Ciudad Juárez";
      $("services").value = "Civil, Mercantil, Laboral";
      generate();
    });
  </script>
</body>
</html>
