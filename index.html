<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>AI Code Sentinel — Prompt OS COSMOS</title>
  <meta name="description" content="Prompt OS COSMOS: decide estrategia (MASTER/META/META²) y genera prompts, workflows, guías, SEO/Legal y código base. 100% local." />
  <link rel="stylesheet" href="./styles.css" />
</head>
<body>
  <header class="topbar">
    <div class="brand">
      <div class="logo" id="logoBox" title="Logo"></div>
      <div class="titles">
        <div class="kicker">AI CODE SENTINEL</div>
        <h1>PROMPT OS <span class="cosmos">COSMOS</span></h1>
        <p>Intent Engine · Multi-artefactos · Editor · Presets · Export/Import · Código base · SEO+Legal</p>
      </div>
    </div>

    <div class="right">
      <div class="pill">
        <span class="dot"></span><span>Local / Gratis</span>
      </div>
      <div class="pill mono" id="verPill">v3.0-cosmos</div>
      <button class="btn ghost" id="btnHelp">Cómo usar</button>
      <button class="btn ghost" id="btnGuide">Guía Integraciones</button>
      <button class="btn ghost" id="btnEditor">Editor</button>
      <button class="btn" id="btnLogo">Logo</button>
    </div>
  </header>

  <main class="grid">
    <!-- LEFT -->
    <section class="card">
      <div class="cardHead">
        <div>
          <div class="title">Proyecto</div>
          <div class="sub">Llena lo mínimo. El sistema infiere estrategia y genera artefactos.</div>
        </div>
        <div class="modePill" id="modePill">
          <span class="mono" id="modeText">Estrategia: AUTO</span>
          <span class="badge" id="modeBadge">AUTO</span>
        </div>
      </div>

      <div class="cardBody">
        <div class="hint">
          <b>Regla:</b> tú describes intención y constraints. <b>COSMOS decide</b> MASTER/META/META² y genera lo necesario.
        </div>

        <div class="toolbar">
          <button class="btn" id="btnGenerate">Generar</button>
          <button class="btn ghost" id="btnReset">Reset</button>
          <div class="spacer"></div>
          <button class="btn ghost" id="btnPresetSave">Guardar preset</button>
          <button class="btn ghost" id="btnPresetLoad">Cargar preset</button>
          <button class="btn ghost" id="btnExport">Export</button>
          <button class="btn ghost" id="btnImport">Import</button>
        </div>

        <div class="sectionTitle">Brief (con búsqueda + “Personalizado”)</div>
        <div class="formGrid" id="formGrid"></div>

        <div class="sectionTitle">Artefactos a generar</div>
        <div class="artifactGrid" id="artifactGrid"></div>

        <div class="sectionTitle">Módulos (para web/código)</div>
        <div class="moduleGrid" id="moduleGrid"></div>

        <div class="notes">
          <label>Notas del sistema (opcional, pero poderoso)</label>
          <textarea id="notes" placeholder="Ej: explícalo como primaria, output en español, sin librerías externas, assets locales, etc."></textarea>
        </div>

        <div class="scoreBox" id="scoreBox" style="display:none">
          <div class="scoreTitle">Intent Engine (por qué decidió)</div>
          <div class="scores" id="scores"></div>
          <div class="mini" id="scoreExplain"></div>
        </div>
      </div>
    </section>

    <!-- RIGHT -->
    <section class="card">
      <div class="cardHead">
        <div>
          <div class="title">Salida (multi-artefactos)</div>
          <div class="sub" id="outSub">Genera y copia por pestañas.</div>
        </div>

        <div class="outBtns">
          <button class="btn" id="btnCopyCurrent">Copiar pestaña</button>
          <button class="btn ghost" id="btnCopyAll">Copiar TODO</button>
          <button class="btn ghost" id="btnDownload">Descargar ZIP-lite</button>
        </div>
      </div>

      <div class="cardBody">
        <div class="tabs" id="tabs"></div>
        <pre class="output" id="output">Haz clic en “Generar”.</pre>
        <div class="mini">
          Tip caché GitHub Pages: agrega <span class="mono">?v=cosmos</span> a la URL o recarga duro.
        </div>
      </div>
    </section>
  </main>

  <!-- dialogs -->
  <dialog id="dlgHelp">
    <div class="dlgHead">
      <b>Cómo usar (sin perder tiempo)</b>
      <button class="btn ghost" data-close="dlgHelp">Cerrar</button>
    </div>
    <div class="dlgBody" id="helpBody"></div>
  </dialog>

  <dialog id="dlgGuide">
    <div class="dlgHead">
      <b>Guía Integraciones (paso a paso ultra)</b>
      <button class="btn ghost" data-close="dlgGuide">Cerrar</button>
    </div>
    <div class="dlgBody" id="guideBody"></div>
  </dialog>

  <dialog id="dlgEditor">
    <div class="dlgHead">
      <b>Editor (catálogo + guías + presets)</b>
      <button class="btn ghost" data-close="dlgEditor">Cerrar</button>
    </div>
    <div class="dlgBody">
      <div class="editorGrid">
        <div class="editorPanel">
          <div class="editorTitle">Catálogo / Guías (editable)</div>
          <p class="muted">
            Edita opciones/módulos/artefactos/herramientas y guías sin tocar el motor.
            <b>Aplicar</b> guarda en tu navegador. <b>Export/Import</b> mueve todo entre cel/lap.
          </p>

          <label>Sección</label>
          <select id="editorSection"></select>

          <label style="margin-top:10px">JSON editable</label>
          <textarea id="editorJson" class="mono" style="min-height:360px"></textarea>

          <div class="toolbar">
            <button class="btn" id="btnEditorApply">Aplicar</button>
            <button class="btn ghost" id="btnEditorReset">Default</button>
          </div>

          <div class="mini warn">⚠ Si el JSON está roto, no se aplica (te avisará).</div>
        </div>

        <div class="editorPanel">
          <div class="editorTitle">Presets con nombre</div>
          <label>Nombre</label>
          <input id="presetName" placeholder="Ej: Abogados - García y Asociados" />
          <div class="toolbar">
            <button class="btn" id="btnPresetSaveNamed">Guardar</button>
            <button class="btn ghost" id="btnPresetDeleteNamed">Borrar</button>
          </div>

          <label style="margin-top:10px">Lista</label>
          <select id="presetList"></select>
          <div class="toolbar">
            <button class="btn" id="btnPresetLoadNamed">Cargar</button>
            <button class="btn ghost" id="btnPresetRename">Renombrar</button>
          </div>

          <div class="mini">Presets se guardan local. Para moverlos usa Export/Import.</div>
        </div>
      </div>
    </div>
  </dialog>

  <input id="logoFile" type="file" accept="image/*" style="display:none" />

  <script src="./options.js"></script>
  <script src="./guides.js"></script>
  <script src="./app.js"></script>
</body>
</html>
